<html>
<head>
<title>FiberNetwork.cpp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #999999; font-weight: normal; font-style: normal; }
.s0 { color: rgb(128,128,128); font-style: italic; }
.s1 { color: rgb(0,0,0); }
.s2 { color: rgb(128,128,0); }
.s3 { color: rgb(0,128,0); font-weight: bold; }
.s4 { color: rgb(0,0,128); font-weight: bold; }
.s5 { color: rgb(0,0,255); }
</style>
</head>
<BODY BGCOLOR="#ffffff">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
FiberNetwork.cpp</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">//</span><span class="s1"> 
</span><span class="s0">// Created by juan on 10/04/17.</span><span class="s1"> 
</span><span class="s0">//</span><span class="s1"> 
 
</span><span class="s2">#include </span><span class="s3">&lt;iostream&gt;</span><span class="s1"> 
</span><span class="s2">#include </span><span class="s3">&lt;vector&gt;</span><span class="s1"> 
</span><span class="s2">#include </span><span class="s3">&lt;cstring&gt;</span><span class="s1"> 
 
</span><span class="s4">using namespace </span><span class="s1">std; 
 
vector&lt;vector&lt;pair&lt;</span><span class="s4">int</span><span class="s1">, string&gt; &gt; &gt; v; 
</span><span class="s4">bool </span><span class="s1">seen[</span><span class="s5">200</span><span class="s1">]; 
</span><span class="s4">bool </span><span class="s1">ans[</span><span class="s5">26</span><span class="s1">]; 
 
 
</span><span class="s4">int </span><span class="s1">n, a, b; 
 
</span><span class="s4">void </span><span class="s1">search(</span><span class="s4">int </span><span class="s1">u, </span><span class="s4">int </span><span class="s1">mask){ 
    </span><span class="s0">//cout &lt;&lt; u &lt;&lt; &quot; &quot; &lt;&lt; mask &lt;&lt; endl;</span><span class="s1"> 
    </span><span class="s4">if </span><span class="s1">(u == b){ 
        </span><span class="s4">for </span><span class="s1">(</span><span class="s4">int </span><span class="s1">j = </span><span class="s5">0</span><span class="s1">; j &lt; </span><span class="s5">26</span><span class="s1">; j++){ 
            </span><span class="s4">if </span><span class="s1">((mask &gt;&gt; j) &amp; </span><span class="s5">1</span><span class="s1">) 
                ans[j] = </span><span class="s5">1</span><span class="s1">; 
        } 
        </span><span class="s4">return</span><span class="s1">; 
    } 
    seen[u] = </span><span class="s5">1</span><span class="s1">; 
    string aux; 
    </span><span class="s4">int </span><span class="s1">tmp; 
    </span><span class="s4">for </span><span class="s1">(</span><span class="s4">int </span><span class="s1">i = </span><span class="s5">0</span><span class="s1">; i &lt; v[u].size(); i++){ 
        </span><span class="s4">if </span><span class="s1">(!seen[v[u][i].first]){ 
            aux = v[u][i].second; 
            tmp = </span><span class="s5">0</span><span class="s1">; 
            </span><span class="s4">for </span><span class="s1">(</span><span class="s4">int </span><span class="s1">j = </span><span class="s5">0</span><span class="s1">; j &lt; aux.size(); j++){ 
                </span><span class="s4">if </span><span class="s1">((mask &gt;&gt; (aux[j]-</span><span class="s3">'a'</span><span class="s1">)) &amp; </span><span class="s5">1</span><span class="s1">) 
                    tmp += (</span><span class="s5">1 </span><span class="s1">&lt;&lt; (aux[j]-</span><span class="s3">'a'</span><span class="s1">)); 
            } 
            search(v[u][i].first, tmp); 
        } 
    } 
    seen[u] = </span><span class="s5">0</span><span class="s1">; 
} 
 
</span><span class="s4">void </span><span class="s1">search(){ 
    seen[a] = </span><span class="s5">1</span><span class="s1">; 
    string aux; 
    </span><span class="s4">int </span><span class="s1">mask; 
    </span><span class="s4">for </span><span class="s1">(</span><span class="s4">int </span><span class="s1">i = </span><span class="s5">0</span><span class="s1">; i &lt; v[a].size(); i++){ 
        aux = v[a][i].second; 
        mask = </span><span class="s5">0</span><span class="s1">; 
        </span><span class="s4">for </span><span class="s1">(</span><span class="s4">int </span><span class="s1">j = </span><span class="s5">0</span><span class="s1">; j &lt; aux.size(); j++) 
            mask += (</span><span class="s5">1 </span><span class="s1">&lt;&lt; (aux[j]-</span><span class="s3">'a'</span><span class="s1">)); 
 
        search(v[a][i].first, mask); 
    } 
    seen[a] = </span><span class="s5">0</span><span class="s1">; 
} 
 
</span><span class="s4">int </span><span class="s1">main(){ 
    cin.tie(</span><span class="s5">0</span><span class="s1">); 
    ios_base::sync_with_stdio(</span><span class="s5">0</span><span class="s1">); 
    </span><span class="s4">bool  </span><span class="s1">flag; 
    string comp; 
    cin &gt;&gt; n; 
    </span><span class="s4">while </span><span class="s1">(n != </span><span class="s5">0</span><span class="s1">){ 
        v.assign(n, vector&lt;pair&lt;</span><span class="s4">int</span><span class="s1">, string&gt; &gt;()); 
        cin &gt;&gt; a &gt;&gt; b; 
        </span><span class="s4">while </span><span class="s1">(a != </span><span class="s5">0 </span><span class="s1">|| b != </span><span class="s5">0</span><span class="s1">){ 
            cin &gt;&gt; comp; 
            v[a-</span><span class="s5">1</span><span class="s1">].push_back(make_pair(b-</span><span class="s5">1</span><span class="s1">, comp)); 
            cin &gt;&gt; a &gt;&gt; b; 
        } 
        cin &gt;&gt; a &gt;&gt; b; 
        </span><span class="s4">while </span><span class="s1">(a != </span><span class="s5">0 </span><span class="s1">|| b != </span><span class="s5">0</span><span class="s1">){ 
            a--; 
            b--; 
            memset(ans, </span><span class="s5">0</span><span class="s1">, </span><span class="s4">sizeof</span><span class="s1">(ans)); 
            flag = </span><span class="s4">false</span><span class="s1">; 
            search(); 
            </span><span class="s4">for </span><span class="s1">(</span><span class="s4">int </span><span class="s1">i = </span><span class="s5">0</span><span class="s1">; i &lt; </span><span class="s5">26</span><span class="s1">; i++){ 
                </span><span class="s4">if </span><span class="s1">(ans[i]) { 
                    flag = </span><span class="s4">true</span><span class="s1">; 
                    cout &lt;&lt; (</span><span class="s4">char</span><span class="s1">) (i + </span><span class="s3">'a'</span><span class="s1">); 
                } 
            } 
            </span><span class="s4">if </span><span class="s1">(!flag) 
                cout &lt;&lt; </span><span class="s3">'-'</span><span class="s1">; 
            cout &lt;&lt; endl; 
            cin &gt;&gt; a &gt;&gt; b; 
        } 
        cout &lt;&lt; endl; 
        cin &gt;&gt; n; 
    } 
}</span></pre>
</body>
</html>